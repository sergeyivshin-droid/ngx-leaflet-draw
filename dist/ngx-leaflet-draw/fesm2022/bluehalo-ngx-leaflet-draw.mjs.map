{"version":3,"file":"bluehalo-ngx-leaflet-draw.mjs","sources":["../../../projects/ngx-leaflet-draw/src/lib/core/leaflet-draw.util.ts","../../../projects/ngx-leaflet-draw/src/lib/core/leaflet-draw.directive.ts","../../../projects/ngx-leaflet-draw/src/lib/leaflet-draw.module.ts","../../../projects/ngx-leaflet-draw/src/bluehalo-ngx-leaflet-draw.ts"],"sourcesContent":["export class LeafletDrawUtil {\r\n\r\n\t/**\r\n\t * Deep copy the source object into the dest object. Will only copy literal values.\r\n\t * @param dest\r\n\t * @param src\r\n\t */\r\n\tstatic deepLiteralCopy<T>(dest: T, src: any): T {\r\n\t\tconst toReturn: T = dest;\r\n\r\n\t\tif (null != src) {\r\n\t\t\tfor (const k in src) {\r\n\r\n\t\t\t\tif (src.hasOwnProperty(k)) {\r\n\t\t\t\t\tif (typeof (src[k]) === 'string' || src[k] instanceof String) {\r\n\t\t\t\t\t\ttoReturn[k] = src[k];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.deepLiteralCopy(toReturn[k], src[k])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn toReturn;\r\n\t}\r\n\r\n\r\n}\r\n","import { Directive, EventEmitter, Input, NgZone, OnInit, Output } from '@angular/core';\r\n\r\nimport 'leaflet-draw';\r\nimport { Control, Draw, DrawEvents, drawLocal } from 'leaflet';\r\n\r\nimport { LeafletDirective, LeafletDirectiveWrapper, LeafletUtil } from '@bluehalo/ngx-leaflet';\r\n\r\nimport { LeafletDrawUtil } from './leaflet-draw.util';\r\n\r\n@Directive({\r\n\tselector: '[leafletDraw]',\r\n})\r\nexport class LeafletDrawDirective\r\n\timplements OnInit {\r\n\r\n\tleafletDirective: LeafletDirectiveWrapper;\r\n\r\n\tdrawControl: Control.Draw;\r\n\r\n\t@Input('leafletDrawOptions') drawOptions: Control.DrawConstructorOptions = null;\r\n\r\n\t// Using 'any' here to avoid duplicating the DrawLocal interface with a bunch of optional properties\r\n\t@Input('leafletDrawLocal') drawLocal: any = null;\r\n\r\n\t// Configure callback function for the map\r\n\t@Output('leafletDrawReady') drawReady = new EventEmitter<Control.Draw>();\r\n\r\n\t// Draw Events\r\n\t@Output('leafletDrawCreated') onDrawCreated = new EventEmitter<DrawEvents.Created>();\r\n\t@Output('leafletDrawEdited') onDrawEdited = new EventEmitter<DrawEvents.Edited>();\r\n\t@Output('leafletDrawDeleted') onDrawDeleted = new EventEmitter<DrawEvents.Deleted>();\r\n\t@Output('leafletDrawStart') onDrawStart = new EventEmitter<DrawEvents.DrawStart>();\r\n\t@Output('leafletDrawStop') onDrawStop = new EventEmitter<DrawEvents.DrawStop>();\r\n\t@Output('leafletDrawVertex') onDrawVertex = new EventEmitter<DrawEvents.DrawVertex>();\r\n\t@Output('leafletDrawEditStart') onDrawEditStart = new EventEmitter<DrawEvents.EditStart>();\r\n\t@Output('leafletDrawEditMove') onDrawEditMove = new EventEmitter<DrawEvents.EditMove>();\r\n\t@Output('leafletDrawEditResize') onDrawEditResize = new EventEmitter<DrawEvents.EditResize>();\r\n\t@Output('leafletDrawEditVertex') onDrawEditVertex = new EventEmitter<DrawEvents.EditVertex>();\r\n\t@Output('leafletDrawEditStop') onDrawEditStop = new EventEmitter<DrawEvents.EditStop>();\r\n\t@Output('leafletDrawDeleteStart') onDrawDeleteStart = new EventEmitter<DrawEvents.DeleteStart>();\r\n\t@Output('leafletDrawDeleteStop') onDrawDeleteStop = new EventEmitter<DrawEvents.DeleteStop>();\r\n\t@Output('leafletDrawToolbarOpened') onDrawToolbarOpened = new EventEmitter<DrawEvents.ToolbarOpened>();\r\n\t@Output('leafletDrawToolbarClosed') onDrawToolbarClosed = new EventEmitter<DrawEvents.ToolbarClosed>();\r\n\t@Output('leafletDrawMarkerContext') onDrawMarkerContext = new EventEmitter<DrawEvents.MarkerContext>();\r\n\r\n\tconstructor(leafletDirective: LeafletDirective, private zone: NgZone) {\r\n\t\tthis.leafletDirective = new LeafletDirectiveWrapper(leafletDirective);\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\tthis.leafletDirective.init();\r\n\r\n\t\t// Configure localization options\r\n\t\tif(null != this.drawLocal) {\r\n\t\t\tLeafletDrawUtil.deepLiteralCopy(drawLocal, this.drawLocal);\r\n\t\t}\r\n\r\n\t\t// Create the control\r\n\t\tthis.drawControl =  new Control.Draw(this.drawOptions);\r\n\r\n\t\t// Add the control to the map\r\n\t\tthis.leafletDirective.getMap().addControl(this.drawControl);\r\n\r\n\t\t// Register the main handler for events coming from the draw plugin\r\n\t\tconst map = this.leafletDirective.getMap();\r\n\r\n\t\t// add draw event pass throughs\r\n\t\tmap.on(Draw.Event.CREATED, (e: any) => LeafletUtil.handleEvent(this.zone, this.onDrawCreated, e));\r\n\t\tmap.on(Draw.Event.EDITED, (e: DrawEvents.Edited) => LeafletUtil.handleEvent(this.zone, this.onDrawEdited, e));\r\n\t\tmap.on(Draw.Event.DELETED, (e: DrawEvents.Deleted) => LeafletUtil.handleEvent(this.zone, this.onDrawDeleted, e));\r\n\t\tmap.on(Draw.Event.DRAWSTART, (e: DrawEvents.DrawStart) => LeafletUtil.handleEvent(this.zone, this.onDrawStart, e));\r\n\t\tmap.on(Draw.Event.DRAWSTOP, (e: DrawEvents.DrawStop) => LeafletUtil.handleEvent(this.zone, this.onDrawStop, e));\r\n\t\tmap.on(Draw.Event.EDITSTART, (e: DrawEvents.EditStart) => LeafletUtil.handleEvent(this.zone, this.onDrawEditStart, e));\r\n\t\tmap.on(Draw.Event.EDITMOVE, (e: DrawEvents.EditMove) => LeafletUtil.handleEvent(this.zone, this.onDrawEditMove, e));\r\n\t\tmap.on(Draw.Event.EDITRESIZE, (e: DrawEvents.EditResize) => LeafletUtil.handleEvent(this.zone, this.onDrawEditResize, e));\r\n\t\tmap.on(Draw.Event.EDITVERTEX, (e: DrawEvents.EditVertex) => LeafletUtil.handleEvent(this.zone, this.onDrawEditVertex, e));\r\n\t\tmap.on(Draw.Event.EDITSTOP, (e: DrawEvents.EditStop) => LeafletUtil.handleEvent(this.zone, this.onDrawEditStop, e));\r\n\t\tmap.on(Draw.Event.DELETESTART, (e: DrawEvents.DeleteStart) => LeafletUtil.handleEvent(this.zone, this.onDrawDeleteStart, e));\r\n\t\tmap.on(Draw.Event.DELETESTOP, (e: DrawEvents.DeleteStop) => LeafletUtil.handleEvent(this.zone, this.onDrawDeleteStop, e));\r\n\t\tmap.on(Draw.Event.TOOLBAROPENED, (e: DrawEvents.ToolbarOpened) => LeafletUtil.handleEvent(this.zone, this.onDrawToolbarOpened, e));\r\n\t\tmap.on(Draw.Event.TOOLBARCLOSED, (e: DrawEvents.ToolbarClosed) => LeafletUtil.handleEvent(this.zone, this.onDrawToolbarClosed, e));\r\n\r\n\t\t// Notify others that the draw control has been created\r\n\t\tthis.drawReady.emit(this.drawControl);\r\n\t}\r\n\r\n\tngOnDestroy() {\r\n\t\tthis.leafletDirective.getMap().removeControl(this.drawControl);\r\n\t}\r\n\r\n\tpublic getDrawControl() {\r\n\t\treturn this.drawControl;\r\n\t}\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { LeafletModule } from '@bluehalo/ngx-leaflet';\r\n\r\nimport { LeafletDrawDirective } from './core/leaflet-draw.directive';\r\n\r\n@NgModule({\r\n    imports: [\r\n        LeafletModule,\r\n        LeafletDrawDirective\r\n    ],\r\n    exports: [\r\n        LeafletDrawDirective\r\n    ]\r\n})\r\nexport class LeafletDrawModule {\r\n\r\n}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}